# Reflections on the Rust Conference 2021

Rust大会顺利闭幕了。虽然由于疫情影响，大会必须在线进行，但是空前地有多达2000人参与会议互动，
从另一方面证明Rust编程语言在软件工程业界的受欢迎和重视程度。
相比之下，码农们对于同一天的召开的Apple 十三香产品发布会没有什么感觉 :-) 
作为开发者中的翘楚，来自Rust社区与会演讲的专家背景各异，年轻活跃。

大会的主题发言由Niko Matsakis和Mara Bos给出，分别介绍Rust语言和Rust库发展的愿景。以下是华为参会专家的部分感想：

1. 从系统安全可信编程语言的视角看，Niko强调虽然Rust语言性能上已经接近C语言，易学易用方面还需要向脚本语言看齐。这不是说Rust要通吃所有编程语言特性的能力，而是要解决实际使用中的痛点。比如，增加Async/Await这个语言特性并不难，难的在于如何让这个增加的特性对语法引入最小的修改。做到这一点，我们才能让Rust的未来发展得更好。作为耕耘Rust社区多年的专家，Guillaume Gomez也认为，在语法和文档适配方面Rust可以做得更好。后面Lily Mara的演讲中，也回应了这个目标：为了更好地普及Rust，哪怕在不重要的地方牺牲一点性能，简化Rust的一些特性也是可取的。掌握了更多的语言特性以后，这些性能的损失很容易可以补回来。另外，Linux Kernel也在部分尝试使用Rust开发，因此，在不远的将来，每一个系统设备里面都有可能有Rust的身影存在。因此，作为系统大厂，华为在Rust方面引领中国开源社区的发展，主攻系统根技术的可信发展，这跟Rust社区的目标十分一致。

2. 从语言特性本身发展的视角看，Mara介绍了一个很有代表性的叙事：Rust标准库中已经基于特定操作系统（pthreads，win32）初步实现了mutex, 但是操作系统中的这些API是针对C的用例设计的，还不能直接映射到Rust的一般用例上。如果要在Rust上绕过这些困难实现mutex需要昂贵的boxing方式。Parking lot是华为专家Amanieu d'Antras在2018年针对Rust的场景实现的高性能mutex库。可是在标准库中引入parking lot在社区引起了经年的讨论，仍然无法彻底解决。虽然在这个过程中，Rust和Parking lot都分别得到了很好的改进和发展，但是始终无法如愿把两者结合。在Mara的领导下，这几个月Rust社区采取了化整为零的策略，逐一排除这个跨平台同步互斥特性的障碍，获得了重大进展：比如让微软配合修改了操作系统API文档规约，间接地起到了整合操作系统发展的作用，重新拾起了Rust社区整合parking lot的信心。对于开源建设，即使是Parking Lot这样的硬骨头，有了化整为零，逐步排查障碍的决心和领导力，Rust的Library库的发展势头更加不可阻挡了。今年以后，Rust Library团队会专业化分为两个团队，一个专注于Library API的维护，另一个专注于Library核心本身的发展，我们很有可能看到更多的库特性，比如把SIMD集成到Rust语言的基本标准库中来。
